(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{6177:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app",function(){return n(4823)}])},3095:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=JSON.parse('[{"inputs":[{"internalType":"contract IVerifier","name":"_verifierWithdraw","type":"address"},{"internalType":"contract IVerifier","name":"_verifierWinning","type":"address"},{"internalType":"contract IWETHGateway","name":"_wethGateway","type":"address"},{"internalType":"uint256","name":"_denomination","type":"uint256"},{"internalType":"uint32","name":"_merkleTreeHeight","type":"uint32"},{"internalType":"address","name":"_hasher","type":"address"},{"internalType":"address","name":"_relayer","type":"address"},{"internalType":"address","name":"_weth","type":"address"},{"internalType":"uint256","name":"_minutes","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"commitment","type":"bytes32"},{"indexed":false,"internalType":"uint32","name":"leafIndex","type":"uint32"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"creator","type":"address"},{"indexed":false,"internalType":"uint256","name":"startTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"endTime","type":"uint256"}],"name":"LogNewLottery","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"","type":"address"},{"indexed":false,"internalType":"uint256","name":"","type":"uint256"}],"name":"Received","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"bytes32","name":"nullifierHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"relayer","type":"address"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"}],"name":"Withdrawal","type":"event"},{"inputs":[],"name":"FIELD_SIZE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NUMBER_OF_MINUTES","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROOT_HISTORY_SIZE","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"WETH","outputs":[{"internalType":"contract IWETH","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ZERO_VALUE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"drawId","type":"uint256"},{"internalType":"uint256","name":"index","type":"uint256"},{"internalType":"uint256","name":"_minutes","type":"uint256"},{"internalType":"uint256","name":"reward","type":"uint256"}],"name":"_triggerDraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"currentDrawId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentRootIndex","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"denomination","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_commitment","type":"bytes32"}],"name":"deposit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"deposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"draws","outputs":[{"internalType":"uint256","name":"drawId","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"bool","name":"isCompleted","type":"bool"},{"internalType":"bool","name":"isSpent","type":"bool"},{"internalType":"uint256","name":"reward","type":"uint256"},{"internalType":"uint256","name":"random","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"filledSubtrees","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getDraws","outputs":[{"components":[{"internalType":"uint256","name":"drawId","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"bool","name":"isCompleted","type":"bool"},{"internalType":"bool","name":"isSpent","type":"bool"},{"internalType":"uint256","name":"reward","type":"uint256"},{"internalType":"uint256","name":"random","type":"uint256"}],"internalType":"struct DrawManager.DrawStruct[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLastRoot","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_left","type":"bytes32"},{"internalType":"bytes32","name":"_right","type":"bytes32"}],"name":"hashLeftRight","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hasher","outputs":[{"internalType":"contract IHasher","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_root","type":"bytes32"}],"name":"isKnownRoot","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_nullifierHash","type":"bytes32"}],"name":"isSpent","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"levels","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nextIndex","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"nullifierHashes","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bound","type":"uint256"}],"name":"random","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"reserves","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"roots","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_minutes","type":"uint256"},{"internalType":"bytes32","name":"_entropy","type":"bytes32"}],"name":"triggerDraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_entropy","type":"bytes32"}],"name":"vrf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"wethGateway","outputs":[{"internalType":"contract IWETHGateway","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"uint256[2]","name":"a","type":"uint256[2]"},{"internalType":"uint256[2][2]","name":"b","type":"uint256[2][2]"},{"internalType":"uint256[2]","name":"c","type":"uint256[2]"}],"internalType":"struct Pool.Proof","name":"_proof","type":"tuple"},{"internalType":"bytes32","name":"_root","type":"bytes32"},{"internalType":"bytes32","name":"_nullifierHash","type":"bytes32"},{"internalType":"address payable","name":"_recipient","type":"address"},{"internalType":"address payable","name":"_relayer","type":"address"},{"internalType":"uint256","name":"_fee","type":"uint256"},{"internalType":"uint256","name":"_drawId","type":"uint256"}],"name":"winning","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"winningVerifier","outputs":[{"internalType":"contract IVerifier","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"uint256[2]","name":"a","type":"uint256[2]"},{"internalType":"uint256[2][2]","name":"b","type":"uint256[2][2]"},{"internalType":"uint256[2]","name":"c","type":"uint256[2]"}],"internalType":"struct Pool.Proof","name":"_proof","type":"tuple"},{"internalType":"bytes32","name":"_root","type":"bytes32"},{"internalType":"bytes32","name":"_nullifierHash","type":"bytes32"},{"internalType":"address payable","name":"_recipient","type":"address"},{"internalType":"address payable","name":"_relayer","type":"address"},{"internalType":"uint256","name":"_fee","type":"uint256"},{"internalType":"uint256","name":"_drawId","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"withdrawVerifier","outputs":[{"internalType":"contract IVerifier","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"zeros","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]'),a=n(4146),r=n(7044),s=n(7294);function u(e){return function(e,t){var n=(0,r.Ge)(),i=n.library,u=n.account,p=n.chainId;return(0,s.useMemo)((function(){if(!e||!t||!i||!p)return null;try{return new a.CH(e,t,i.getSigner(u))}catch(n){return console.error("Failed To Get Contract",n),null}}),[e,t,i,u])}(e,i)}},4823:function(e,t,n){"use strict";n.r(t);var i=n(4051),a=n.n(i),r=n(5893),s=n(9996),u=n(7375),p=n(8527),y=n(6886),o=n(6114),l=n(918),c=n(9762),d=n(5193),m=n(2115),f=n(3991),x=n(533),h=n(7294),b=n(3095),T=n(7044),w=n(9876),v=n(1664),g=n.n(v);function j(e,t,n,i,a,r,s){try{var u=e[r](s),p=u.value}catch(y){return void n(y)}u.done?t(p):Promise.resolve(p).then(i,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function s(e){j(r,i,a,s,u,"next",e)}function u(e){j(r,i,a,s,u,"throw",e)}s(void 0)}))}}var M={type:"error",title:"title",message:"message"};t.default=function(){var e=(0,u.qY)(),t=e.isOpen,n=e.onOpen,i=e.onClose,v=(0,u.qY)(),j=v.isOpen,I=v.onOpen,k=v.onClose,S=(0,b.Z)((0,x.Kn)()),C=(0,T.Ge)(),z=C.account,E=C.chainId,O=(0,h.useState)(""),N=O[0],D=O[1],W=(0,h.useState)(null),H=W[0],P=W[1],R=(0,h.useState)(!1),Z=R[0],B=R[1],Y=(0,h.useState)(!1),A=Y[0],L=Y[1],V=(0,h.useState)(M),F=V[0],G=V[1],X=(0,h.useState)(0),K=X[0],U=X[1],q=(0,h.useState)(0),Q=q[0],J=q[1],$=(0,h.useState)(0),ee=$[0],te=$[1],ne=function(){var e=_(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.currentDrawId();case 2:return t=e.sent.toNumber(),e.t0=parseInt,e.next=6,S.denomination();case 6:e.t1=e.sent.toString(),e.t2=(0,e.t0)(e.t1),n=e.t2/1e18,J(t),te(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,h.useEffect)((function(){S&&ne()}),[S]);var ie=function(e){return U(e)},ae=function(){var e=_(a().mark((function e(){var t,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.provider.getBalance(z);case 3:return e.next=5,e.sent;case 5:if(!(e.sent.toString()/1e18<.1)){e.next=13;break}return G({type:"error",title:"Insufficient Balance",message:"You have currently insufficient balance to buy the ticket"}),B(!1),I(),e.abrupt("return");case 13:return n(),e.next=16,(0,x.$P)(void 0,void 0,K);case 16:return t=e.sent,P(t),e.next=20,S.currentDrawId();case 20:return i=e.sent.toNumber(),J(i),e.next=24,(0,x.UK)(t,i);case 24:r=e.sent,D(r);case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),console.log({err:e.t0}),B(!1);case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=_(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!1),e.next=3,(0,x.By)(H,S,Q);case 3:t=e.sent,L(!1),G(t),I(),i();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(p.W2,{style:{height:"100vh",backgroundPosition:"center",marginTop:"20px"},maxW:"1200px",children:[(0,r.jsx)(s.Z,{page:"Draws"}),!(0,x.p)(E)&&(0,r.jsxs)(y.bZ,{status:"error",children:[(0,r.jsx)(y.zM,{}),"The current selected network is not supported switch to rinkeby"]})," ",(0,r.jsx)(p.W2,{w:"100%",h:"10",style:{height:"100vh",backgroundPosition:"center",marginTop:"10%"},maxW:"600px",children:"string"===typeof z?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p.xu,{maxW:"32rem",children:[(0,r.jsx)(p.X6,{mb:4,style:{fontSize:"24px",textAlign:"center"},children:"Buy Ticket For Draw ".concat(Q)}),(0,r.jsx)(p.xv,{fontSize:"md",style:{textAlign:"center"},children:"Buy ticket and pick a random blind guess to become part of current draw. At the end of the draw a random number is selected through VRF to pick the user."})]}),(0,r.jsx)("div",{className:"box",children:(0,r.jsxs)("div",{className:"inner",children:[(0,r.jsx)("h1",{children:"ZKPoolTogether 2022"}),(0,r.jsxs)("div",{className:"info clearfix",children:[(0,r.jsxs)("div",{className:"wp",children:["Draw ID",(0,r.jsx)("h2",{children:Q})]}),(0,r.jsxs)("div",{className:"wp",children:["Curr",(0,r.jsx)("h2",{children:"ETH"})]}),(0,r.jsxs)("div",{className:"wp",children:["Entry",(0,r.jsx)("h2",{children:ee})]})]}),(0,r.jsx)("div",{className:"total clearfix",children:(0,r.jsxs)("h2",{children:["Total : ",(0,r.jsx)("p",{children:"0.01 ETH"})]})})]})}),(0,r.jsxs)(p.kC,{style:{marginTop:"5%"},children:[(0,r.jsxs)(o.Y2,{style:{marginRight:"4%"},maxW:"80px",value:K,onChange:ie,children:[(0,r.jsx)(o.zu,{}),(0,r.jsxs)(o.Fi,{children:[(0,r.jsx)(o.WQ,{}),(0,r.jsx)(o.Y_,{})]})]}),(0,r.jsxs)(l.iR,{flex:"1",focusThumbOnChange:!1,value:K,onChange:ie,children:[(0,r.jsx)(l.Uj,{children:(0,r.jsx)(l.Ms,{})}),(0,r.jsx)(l.gs,{fontSize:"sm",boxSize:"24px",children:K})]})]}),(0,r.jsxs)(c.NI,{children:[" ",(0,r.jsx)(c.Q6,{children:"select your random number guess"})]}),(0,r.jsx)(d.zx,{colorScheme:"orange",bg:"#fc6643",px:6,_hover:{bg:"orange.390"},style:{marginTop:"5%"},width:"100%",isLoading:Z,loadingText:"Buying",onClick:function(){B(!0),ae()},children:"Buy"})]}):(0,r.jsx)(p.xu,{maxW:"32rem",children:(0,r.jsx)(p.X6,{mb:4,style:{textAlign:"center",marginTop:"45%"},children:"Connect Your Wallet To Buy Ticket!"})})}),(0,r.jsxs)(m.u_,{isOpen:j,size:"xl",onClose:function(){k()},children:[(0,r.jsx)(m.ZA,{}),(0,r.jsx)(m.hz,{children:(0,r.jsxs)(y.bZ,{status:F.type,variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[(0,r.jsx)(y.zM,{boxSize:"40px",mr:0}),(0,r.jsxs)(p.xu,{children:[(0,r.jsx)(y.Cd,{mt:4,mb:1,fontSize:"lg",children:F.title}),(0,r.jsx)(y.X,{maxWidth:"md",children:"success"===F.type?"".concat((0,x.pm)(F.message,50)):F.message})]}),"success"===F.type&&(0,r.jsxs)(p.rj,{margin:"2",templateColumns:"repeat(2, 1fr)",gap:6,children:[(0,r.jsx)(p.P4,{children:(0,r.jsxs)(d.zx,{onClick:function(){navigator.clipboard.writeText(F.message)},children:[" ",(0,r.jsx)(w.TI,{})," "]})}),(0,r.jsx)(p.P4,{children:(0,r.jsx)(d.zx,{children:(0,r.jsx)(g(),{href:F.message,children:(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(w.h0,{})})})})})]})]})})]}),(0,r.jsxs)(m.u_,{isOpen:t,size:"xl",onClose:function(){B(!1),i()},children:[(0,r.jsx)(m.ZA,{}),(0,r.jsxs)(m.hz,{children:[(0,r.jsx)(m.xB,{children:"Your private note"}),(0,r.jsx)(m.ol,{}),(0,r.jsxs)(m.fe,{children:["Please back up your note. You will need it later to withdraw your deposit amount or to clame the winning amount. Treat your note as a private key - never share it with anyone, including zkpooltogether developers.",(0,r.jsx)(p.EK,{style:{margin:20},colorScheme:"#fc6643",children:N}),(0,r.jsx)(f.XZ,{children:"I have backed up the note"})]}),(0,r.jsxs)(m.mz,{children:[(0,r.jsxs)(d.zx,{px:6,mr:3,onClick:function(){navigator.clipboard.writeText(N)},children:[" ",(0,r.jsx)(w.TI,{})," "]}),(0,r.jsx)(d.zx,{px:6,_hover:{bg:"orange.390"},mr:3,onClick:function(){B(!1),i()},children:"Cancel"}),(0,r.jsx)(d.zx,{px:6,_hover:{bg:"orange.390"},isLoading:A,loadingText:"Depositing...",onClick:_(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,re();case 3:case"end":return e.stop()}}),e)}))),children:"Deposit"})]})]})]})]})}}},function(e){e.O(0,[860,714,792,808,500,975,903,778,774,888,179],(function(){return t=6177,e(e.s=t);var t}));var t=e.O();_N_E=t}]);