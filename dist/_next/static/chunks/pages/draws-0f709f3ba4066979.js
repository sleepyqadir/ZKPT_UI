(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{1821:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/draws",function(){return n(8989)}])},3095:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=JSON.parse('[{"inputs":[{"internalType":"contract IVerifier","name":"_verifierWithdraw","type":"address"},{"internalType":"contract IVerifier","name":"_verifierWinning","type":"address"},{"internalType":"contract IWETHGateway","name":"_wethGateway","type":"address"},{"internalType":"uint256","name":"_denomination","type":"uint256"},{"internalType":"uint32","name":"_merkleTreeHeight","type":"uint32"},{"internalType":"address","name":"_hasher","type":"address"},{"internalType":"address","name":"_relayer","type":"address"},{"internalType":"address","name":"_weth","type":"address"},{"internalType":"uint256","name":"_minutes","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"commitment","type":"bytes32"},{"indexed":false,"internalType":"uint32","name":"leafIndex","type":"uint32"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"creator","type":"address"},{"indexed":false,"internalType":"uint256","name":"startTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"endTime","type":"uint256"}],"name":"LogNewLottery","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"","type":"address"},{"indexed":false,"internalType":"uint256","name":"","type":"uint256"}],"name":"Received","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"bytes32","name":"nullifierHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"relayer","type":"address"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"}],"name":"Withdrawal","type":"event"},{"inputs":[],"name":"FIELD_SIZE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NUMBER_OF_MINUTES","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROOT_HISTORY_SIZE","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"WETH","outputs":[{"internalType":"contract IWETH","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ZERO_VALUE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"drawId","type":"uint256"},{"internalType":"uint256","name":"index","type":"uint256"},{"internalType":"uint256","name":"_minutes","type":"uint256"},{"internalType":"uint256","name":"reward","type":"uint256"}],"name":"_triggerDraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"currentDrawId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentRootIndex","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"denomination","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_commitment","type":"bytes32"}],"name":"deposit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"deposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"draws","outputs":[{"internalType":"uint256","name":"drawId","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"bool","name":"isCompleted","type":"bool"},{"internalType":"bool","name":"isSpent","type":"bool"},{"internalType":"uint256","name":"reward","type":"uint256"},{"internalType":"uint256","name":"random","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"filledSubtrees","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getDraws","outputs":[{"components":[{"internalType":"uint256","name":"drawId","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"bool","name":"isCompleted","type":"bool"},{"internalType":"bool","name":"isSpent","type":"bool"},{"internalType":"uint256","name":"reward","type":"uint256"},{"internalType":"uint256","name":"random","type":"uint256"}],"internalType":"struct DrawManager.DrawStruct[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLastRoot","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_left","type":"bytes32"},{"internalType":"bytes32","name":"_right","type":"bytes32"}],"name":"hashLeftRight","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hasher","outputs":[{"internalType":"contract IHasher","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_root","type":"bytes32"}],"name":"isKnownRoot","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_nullifierHash","type":"bytes32"}],"name":"isSpent","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"levels","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nextIndex","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"nullifierHashes","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bound","type":"uint256"}],"name":"random","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"reserves","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"roots","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_minutes","type":"uint256"},{"internalType":"bytes32","name":"_entropy","type":"bytes32"}],"name":"triggerDraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_entropy","type":"bytes32"}],"name":"vrf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"wethGateway","outputs":[{"internalType":"contract IWETHGateway","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"uint256[2]","name":"a","type":"uint256[2]"},{"internalType":"uint256[2][2]","name":"b","type":"uint256[2][2]"},{"internalType":"uint256[2]","name":"c","type":"uint256[2]"}],"internalType":"struct Pool.Proof","name":"_proof","type":"tuple"},{"internalType":"bytes32","name":"_root","type":"bytes32"},{"internalType":"bytes32","name":"_nullifierHash","type":"bytes32"},{"internalType":"address payable","name":"_recipient","type":"address"},{"internalType":"address payable","name":"_relayer","type":"address"},{"internalType":"uint256","name":"_fee","type":"uint256"},{"internalType":"uint256","name":"_drawId","type":"uint256"}],"name":"winning","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"winningVerifier","outputs":[{"internalType":"contract IVerifier","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"uint256[2]","name":"a","type":"uint256[2]"},{"internalType":"uint256[2][2]","name":"b","type":"uint256[2][2]"},{"internalType":"uint256[2]","name":"c","type":"uint256[2]"}],"internalType":"struct Pool.Proof","name":"_proof","type":"tuple"},{"internalType":"bytes32","name":"_root","type":"bytes32"},{"internalType":"bytes32","name":"_nullifierHash","type":"bytes32"},{"internalType":"address payable","name":"_recipient","type":"address"},{"internalType":"address payable","name":"_relayer","type":"address"},{"internalType":"uint256","name":"_fee","type":"uint256"},{"internalType":"uint256","name":"_drawId","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"withdrawVerifier","outputs":[{"internalType":"contract IVerifier","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"zeros","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]'),a=n(4146),r=n(7044),s=n(7294);function u(e){return function(e,t){var n=(0,r.Ge)(),i=n.library,u=n.account,p=n.chainId;return(0,s.useMemo)((function(){if(!e||!t||!i||!p)return null;try{return new a.CH(e,t,i.getSigner(u))}catch(n){return console.error("Failed To Get Contract",n),null}}),[e,t,i,u])}(e,i)}},8989:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var i=n(4051),a=n.n(i),r=n(5893),s=n(9996),u=n(8527),p=n(6886),y=n(9876),o=n(7294),l=n(7375),d=n(5193),m=n(1163),c=function(e){var t=e.title,n=e.options,i=(e.isSpent,e.isCompleted),a=e.random,s=(0,l.qY)(),p=(s.isOpen,s.onOpen,s.onClose,(0,o.useRef)(null),(0,m.useRouter)());return(0,r.jsxs)(u.Kq,{p:3,py:3,justifyContent:{base:"flex-start",md:"space-around"},direction:{base:"column",md:"row"},alignItems:{md:"center"},children:[(0,r.jsxs)(u.X6,{size:"md",children:["Draw: ",t]}),(0,r.jsx)(u.aV,{spacing:3,textAlign:"start",children:n.map((function(e,t){return(0,r.jsxs)(u.HC,{children:[e.status?(0,r.jsx)(u.DE,{as:y.nQ,color:"green.500"}):(0,r.jsx)(u.DE,{as:y.Tw,color:"red.500"}),e.desc]},e.id)}))}),(0,r.jsx)(u.X6,{size:"xl",children:a}),(0,r.jsx)(u.Kq,{children:(0,r.jsx)(d.zx,{size:"md",colorScheme:"orange",bg:"#fc6643",px:6,_hover:{bg:"white.390"},disabled:!i,onClick:function(){p.push({pathname:"/check",query:{title:t,random:a}})},children:i?"Check":"In Progress"})})]})},f=n(7233),b=n(949),T=n(3750),w=n(6893),h=n(3095),x=n(533);function v(e,t,n,i,a,r,s){try{var u=e[r](s),p=u.value}catch(y){return void n(y)}u.done?t(p):Promise.resolve(p).then(i,a)}function g(e){var t=e.title,n=e.stat,i=e.icon;return(0,r.jsx)(f.kN,{px:{base:2,md:4},py:"5",shadow:"xl",border:"1px solid",borderColor:(0,b.ff)("gray.800","gray.500"),rounded:"lg",children:(0,r.jsxs)(u.kC,{justifyContent:"space-between",children:[(0,r.jsxs)(u.xu,{pl:{base:2,md:4},children:[(0,r.jsx)(f.dw,{fontWeight:"medium",children:t}),(0,r.jsx)(f.Jf,{fontSize:"2xl",fontWeight:"medium",children:n})]}),(0,r.jsx)(u.xu,{my:"auto",color:(0,b.ff)("gray.800","gray.200"),alignContent:"center",children:i})]})})}function _(){var e=(0,h.Z)((0,x.Kn)()),t=(0,o.useState)(0),n=t[0],i=t[1],s=(0,o.useState)(0),p=s[0],y=s[1],l=(0,o.useState)(0),d=l[0],m=l[1],c=function(){var t,n=(t=a().mark((function t(){var n,r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.nextIndex();case 2:return n=t.sent,i(n),t.next=6,e.currentDrawId();case 6:return r=t.sent,t.next=9,e.getBalance();case 9:s=t.sent,m(parseInt(s.toString())/1e18),y(parseInt(r.toString())+1);case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function s(e){v(r,i,a,s,u,"next",e)}function u(e){v(r,i,a,s,u,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,o.useEffect)((function(){e&&c()}),[e]),(0,r.jsx)(u.xu,{maxW:"7xl",mx:"auto",pt:5,px:{base:2,sm:12,md:17},children:(0,r.jsxs)(u.MI,{columns:{base:1,md:3},spacing:{base:5,lg:8},children:[(0,r.jsx)(g,{title:"Users",stat:n,icon:(0,r.jsx)(T.O5U,{size:"3em"})}),(0,r.jsx)(g,{title:"Draws",stat:p,icon:(0,r.jsx)(w.j8v,{size:"3em"})}),(0,r.jsx)(g,{title:"Strategy Pool",stat:d,icon:(0,r.jsx)("p",{children:"ETH"})})]})})}var j=n(7044);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function S(e,t,n,i,a,r,s){try{var u=e[r](s),p=u.value}catch(y){return void n(y)}u.done?t(p):Promise.resolve(p).then(i,a)}function I(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=function(){var e=(0,h.Z)((0,x.Kn)()),t=(0,j.Ge)(),n=(t.account,t.chainId),i=(0,o.useState)([]),y=i[0],l=i[1],d=function(){var t,n=(t=a().mark((function t(){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDraws();case 2:n=t.sent,i=I(n).reverse(),console.log(i[0].endTime.toString()),l(i);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function s(e){S(r,i,a,s,u,"next",e)}function u(e){S(r,i,a,s,u,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,o.useEffect)((function(){e&&d()}),[e]),(0,r.jsxs)(u.W2,{style:{height:"100vh",backgroundPosition:"center",marginTop:"20px"},maxW:"1200px",children:[(0,r.jsx)(s.Z,{page:"App"}),!(0,x.p)(n)&&(0,r.jsxs)(p.bZ,{status:"error",children:[(0,r.jsx)(p.zM,{}),"The current selected network is not supported switch to rinkeby to see data"]})," ",(0,r.jsx)(_,{}),(0,r.jsx)(u.xu,{py:6,px:5,style:{minHeight:"100vh"},children:(0,r.jsxs)(u.Kq,{spacing:4,width:"100%",direction:"column",children:[(0,r.jsx)(u.iz,{}),(0,r.jsxs)(u.Kq,{style:{marginRight:"75px"},justifyContent:{base:"flex-start",md:"space-around"},direction:{base:"column",md:"row"},children:[(0,r.jsx)(u.X6,{size:"md",children:"DRAWS"}),(0,r.jsx)(u.X6,{size:"md",children:"STATUS"}),(0,r.jsx)(u.X6,{size:"md",children:"Random No"}),(0,r.jsx)(u.X6,{size:"md",children:"CHECK"})]}),y.map((function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.iz,{}),(0,r.jsx)(c,{title:e.drawId.toString(),isSpent:e.isSpent,isCompleted:e.isCompleted,random:e.isCompleted?e.random.toString():"Not yet",options:[{id:1,desc:"Spent",status:e.isSpent},{id:2,desc:"Winner Seclected",status:e.isCompleted},{id:3,desc:"Completed",status:e.isCompleted}]})]})}))]})})]})}}},function(e){e.O(0,[860,714,792,808,13,500,154,778,774,888,179],(function(){return t=1821,e(e.s=t);var t}));var t=e.O();_N_E=t}]);