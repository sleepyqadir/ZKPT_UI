(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{997:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/logo.884452c3.png",height:500,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAtUlEQVR42mMAgSvfPjN+mNTE/KUyieVrZznL5xmdzFc+f2BkIAocY2BgvPL/P+eX7krn70n2s36Vx876O6fb9fr//9y7gXIQK04fK7+9a9P/e9vW/b+3Z8v/W7u3/D95cHcXAwxcOXl40a3lc//fAUkunvn/dUvx/727toaCJf8DjfE7fITvXm6E28coozlf4izn/ku29WCYv5mFgWjQuGY1452yFOaXBZEsr3OCWb5l+zLD5ABjxld10ptGIQAAAABJRU5ErkJggg=="}},9996:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(5893),a=n(949),o=n(7375),s=n(8527),i=n(5193),u=n(9876),c=n(7044),f=n(7294),l=n(9857),p=new l._k({supportedChainIds:[4]});var h=n(4051),d=n.n(h);var v=n(2003),x=n.n(v);function g(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){g(o,r,a,s,i,"next",e)}function i(e){g(o,r,a,s,i,"throw",e)}s(void 0)}))}}var w=n(533),y=n(894),b=n(1163);function _(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(r,a)}var k=function(e){var t=e.triedToEagerConnect,a=(0,c.Ge)(),o=a.active,s=a.error,u=a.activate,h=(a.chainId,a.account),v=a.setError,g=((0,b.useRouter)(),function(){var e=(0,f.useRef)(),t=(0,f.useState)(),r=t[0],a=t[1];function o(){return(o=m(d().mark((function t(){var r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,n.e(54).then(n.bind(n,8054)).then((function(e){return e.default}));case 3:a=t.sent,e.current=new a,null===(r=e.current)||void 0===r||r.startOnboarding();case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,f.useEffect)((function(){function e(){return(e=m(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()({timeout:1e3,mustBeMetaMask:!0});case 2:t=e.sent,a(!!t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{startOnboarding:function(){return o.apply(this,arguments)},stopOnboarding:function(){(null===e||void 0===e?void 0:e.current)&&e.current.stopOnboarding()},isMetaMaskInstalled:r,isWeb3Available:null===window||void 0===window?void 0:window.ethereum}}()),k=g.isMetaMaskInstalled,I=g.isWeb3Available,E=g.startOnboarding,A=g.stopOnboarding,j=(0,f.useState)(!1),O=j[0],z=j[1];(0,f.useEffect)((function(){(o||s)&&(z(!1),A())}),[o,s,A]);var C,S=function(e){var t=(0,c.Ge)(),n=t.library,r=t.chainId,a=(0,f.useState)(""),o=a[0],s=a[1];return(0,f.useEffect)((function(){if(n&&"string"===typeof e){var t=!1;return n.lookupAddress(e).then((function(e){t||"string"!==typeof e||s(e)})).catch((function(){})),function(){t=!0,s("")}}}),[n,e,r]),o}(h);return s?(0,r.jsxs)(i.zx,{onClick:(C=d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.If)(!0);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=C.apply(e,t);function o(e){_(a,n,r,o,s,"next",e)}function s(e){_(a,n,r,o,s,"throw",e)}o(void 0)}))}),children:[(0,r.jsx)(y.JO,{viewBox:"0 0 200 200",color:"red.500",style:{marginRight:"10px"},children:(0,r.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})}),"Switch Network"]}):t?"string"!==typeof h?(0,r.jsx)("div",{children:I?(0,r.jsxs)(i.zx,{disabled:O,onClick:function(){z(!0),u(p,void 0,!0).catch((function(e){var t,n;t=e,(null!=(n=l.ab)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)?(z(!1),(0,w.If)(!0)):v(e)}))},colorScheme:"orange",bg:"#fc6643",loadingText:"Connecting...",px:6,_hover:{bg:"orange.390"},children:[k?"Connect to MetaMask":"Connect to Wallet"," "]}):(0,r.jsx)(i.zx,{onClick:E,children:"Install Metamask"})}):(0,r.jsx)(i.zx,{children:S||"".concat((0,w.pm)(h,4))}):null},I=function(){var e=(0,c.Ge)(),t=e.chainId;return"string"!==typeof e.account?null:(0,r.jsx)(i.zx,{children:(0,w.Hy)(t)})},E=n(5675),A=n.n(E);function j(e){var t=e.page,l=(0,a.If)(),h=l.colorMode,d=l.toggleColorMode,v=(0,o.qY)(),x=(v.isOpen,v.onOpen,v.onClose,(0,c.Ge)()),g=x.account,m=(x.library,x.chainId),w=function(){var e=(0,c.Ge)(),t=e.activate,n=e.active,r=(0,f.useState)(!1),a=r[0],o=r[1];return(0,f.useEffect)((function(){p.isAuthorized().then((function(e){e?t(p,void 0,!0).catch((function(){o(!0)})):o(!0)}))}),[t]),(0,f.useEffect)((function(){!a&&n&&o(!0)}),[a,n]),a}(),y=(0,b.useRouter)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.xu,{px:4,children:(0,r.jsxs)(s.kC,{h:16,alignItems:"center",justifyContent:"space-between",children:[(0,r.jsx)(s.xu,{children:(0,r.jsx)(A(),{width:"135",height:"135",src:n(997)})}),(0,r.jsx)(s.kC,{alignItems:"center",children:(0,r.jsxs)(s.Kq,{direction:"row",spacing:7,children:["string"===typeof g&&4===m&&(0,r.jsx)(i.zx,{onClick:function(){return y.push("/".concat(t.toLowerCase()))},children:t}),(0,r.jsx)(i.zx,{onClick:d,children:"light"===h?(0,r.jsx)(u.kL,{}):(0,r.jsx)(u.NW,{})}),(0,r.jsx)(I,{}),(0,r.jsx)(k,{triedToEagerConnect:w})]})})]})})})}},533:function(e,t,n){"use strict";n.d(t,{EV:function(){return B},$P:function(){return I},By:function(){return z},UK:function(){return E},Kn:function(){return N},Hy:function(){return H},p:function(){return M},NT:function(){return j},pm:function(){return k},If:function(){return D},O_:function(){return S},XW:function(){return C}});var r=n(4051),a=n.n(r),o=n(2593),s=n(5634),i=n(6441),u=n(1744);function c(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){c(o,r,a,s,i,"next",e)}function i(e){c(o,r,a,s,i,"throw",e)}s(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e),this.db=t}var t=e.prototype;return t.get=function(e){return this.db[e]},t.get_or_element=function(e,t){var n=this.db[e];return void 0===n?t:n},t.put=function(e,t){if(void 0===e||void 0===t)throw Error("key or value is undefined");this.db[e]=t},t.del=function(e){delete this.db[e]},t.put_batch=function(e){var t=this;e.forEach((function(e){t.db[e.key]=e.value}))},e}(),h=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new p;l(this,e),this.n_levels=t,this.prefix=n,this.hasher=r,this.storage=a,this.zero_values=[],this.totalElements=0;var o="21663839004416932945382355908790599225266501822907911457504978515578255421292";this.zero_values.push(o);for(var s=0;s<t;s++)o=this.hasher.hash(o,o),this.zero_values.push(o.toString())}var t=e.prototype;return t.root=function(){var t=this;return f(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.get_or_element(e.index_to_key(t.prefix,t.n_levels,0),t.zero_values[t.n_levels]);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})))()},t.path=function(t){var n=this;return f(a().mark((function r(){var o,s,i,u;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=function(){function t(e,n,r){l(this,t),this.prefix=e,this.storage=n,this.zero_values=r,this.path_elements=[],this.path_index=[]}return t.prototype.handle_index=function(t,n,r){var o=this;return f(a().mark((function s(){var i;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.storage.get_or_element(e.index_to_key(o.prefix,t,r),o.zero_values[t]);case 2:i=a.sent,o.path_elements.push(i),o.path_index.push(n%2);case 5:case"end":return a.stop()}}),s)})))()},t}(),t=Number(t),s=new o(n.prefix,n.storage,n.zero_values),r.next=5,n.storage.get_or_element(e.index_to_key(n.prefix,n.n_levels,0),n.zero_values[n.n_levels]);case 5:return i=r.sent,r.next=8,n.storage.get_or_element(e.index_to_key(n.prefix,0,t),n.zero_values[0]);case 8:return u=r.sent,r.next=11,n.traverse(t,s);case 11:return r.abrupt("return",{root:i,path_elements:s.path_elements,path_index:s.path_index,element:u});case 12:case"end":return r.stop()}}),r)})))()},t.update=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this;return f(a().mark((function s(){var i;return a().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(r||!(t>=o.totalElements)){s.next=4;break}throw Error("Use insert method for new elements.");case 4:if(!(r&&t<o.totalElements)){s.next=6;break}throw Error("Use update method for existing elements.");case 6:return s.prev=6,i=new(function(){function t(e,n,r,a,o){l(this,t),this.prefix=e,this.storage=n,this.hasher=r,this.current_element=a,this.zero_values=o,this.original_element="",this.key_values_to_put=[]}return t.prototype.handle_index=function(t,n,r){var o=this;return f(a().mark((function s(){var i,u,c;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==t){a.next=4;break}return a.next=3,o.storage.get_or_element(e.index_to_key(o.prefix,t,n),o.zero_values[t]);case 3:o.original_element=a.sent;case 4:return a.next=6,o.storage.get_or_element(e.index_to_key(o.prefix,t,r),o.zero_values[t]);case 6:i=a.sent,n%2===0?(u=o.current_element,c=i):(u=i,c=o.current_element),o.key_values_to_put.push({key:e.index_to_key(o.prefix,t,n),value:o.current_element}),o.current_element=o.hasher.hash(u,c);case 11:case"end":return a.stop()}}),s)})))()},t}())(o.prefix,o.storage,o.hasher,n,o.zero_values),s.next=11,o.traverse(t,i);case 11:return i.key_values_to_put.push({key:e.index_to_key(o.prefix,o.n_levels,0),value:i.current_element}),s.next=14,o.storage.put_batch(i.key_values_to_put);case 14:s.next=19;break;case 16:s.prev=16,s.t0=s.catch(6),console.error(s.t0);case 19:case"end":return s.stop()}}),s,null,[[6,16]])})))()},t.insert=function(e){var t=this;return f(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.totalElements,n.next=3,t.update(r,e,!0);case 3:t.totalElements++;case 4:case"end":return n.stop()}}),n)})))()},t.traverse=function(e,t){var n=this;return f(a().mark((function r(){var o,s,i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=e,s=0;case 2:if(!(s<n.n_levels)){r.next=11;break}return i=o,o%2===0?i+=1:i-=1,r.next=7,t.handle_index(s,o,i);case 7:o=Math.floor(o/2);case 8:s++,r.next=2;break;case 11:case"end":return r.stop()}}),r)})))()},t.getIndexByElement=function(t){for(var n=this.totalElements-1;n>=0;n--){if(this.storage.get(e.index_to_key(this.prefix,0,n))===t)return n}return!1},e.index_to_key=function(e,t,n){return"".concat(e,"_tree_").concat(t,"_").concat(n)},e}();var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.poseidon=t}return e.prototype.hash=function(e,t){return j(this.poseidon,[e,t])},e}();n(1864),n(1752);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nullifier=t,this.secret=n,this.guess=r,this.poseidon=a,this.poseidon=a}var t,n,r;return e.new=function(e,t,n,r){return new this(e,t,n,r)},t=e,(n=[{key:"commitment",get:function(){return j(this.poseidon,[this.nullifier,this.secret,this.guess])}},{key:"nullifierHash",get:function(){return j(this.poseidon,[this.nullifier,17])}}])&&v(t.prototype,n),r&&v(t,r),e}();function g(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){g(o,r,a,s,i,"next",e)}function i(e){g(o,r,a,s,i,"throw",e)}s(void 0)}))}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}var b=n(2647),_=n(2325);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.substring(0,t+2),"\u2026").concat(e.substring(e.length-t))}var I=function(){var e=m(a().mark((function e(){var t,n,r,o,i,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:s.O(15),n=u.length>1&&void 0!==u[1]?u[1]:s.O(15),r=u.length>2&&void 0!==u[2]?u[2]:4,e.next=3,b.buildPoseidon();case 3:return o=e.sent,i=x.new(t,n,r,o),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=m(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"0.1",r=t.guess,e.abrupt("return","zkpt-eth-".concat("0.1","-").concat(r,"-").concat(n,"-0x").concat(t.nullifier,"-0x").concat(t.secret));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=m(a().mark((function e(t){var n,r,o,s,i,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.split("0x"),console.log({noteArray:n}),r=RegExp("zkpt-(?<currency>\\w+)-(?<amount>[\\d.]+)-(?<guess>\\d+)-(?<drawId>\\d+)","g"),o=r.exec(n[0]),console.log({match:o}),s=n[1].replace("-","").split(",").map((function(e){return+e})),i=new Uint8Array(s),u=n[2].replace("-","").split(",").map((function(e){return+e})),c=new Uint8Array(u),e.next=12,I(i,c,parseInt(o[3]));case 12:return e.t0=e.sent,e.t1=parseInt(o[4]),e.abrupt("return",{deposit:e.t0,drawId:e.t1});case 17:e.prev=17,e.t2=e.catch(0),console.log({err:e.t2});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),j=function(e,t){try{var n=e(t.map((function(e){return o.O$.from(e).toBigInt()}))),r=e.F.toString(n),a=o.O$.from(r).toHexString();return i.$m(a,32)}catch(s){console.log("errrrr in poseidonHash ====>??",s)}},O=function(){var e=m(a().mark((function e(t,n,r){var o,s,i,u,c,f,l,p,v,x,g,m,w,y,_,k,I,E;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.filters.Deposit(),e.next=3,r.queryFilter(o,0,"latest");case 3:return s=e.sent,e.next=6,b.buildPoseidon();case 6:return i=e.sent,u=new h(20,"test",new d(i)),e.next=10,j(i,[t.commitment,n]);case 10:c=e.sent,console.log({saltedCommitment:c}),f=s.sort((function(e,t){return e.args.leafIndex-t.args.leafIndex})).map((function(e){return e.args.commitment})),l=!0,p=!1,v=void 0,e.prev=14,x=f[Symbol.iterator]();case 16:if(l=(g=x.next()).done){e.next=23;break}return m=g.value,e.next=20,u.insert(m);case 20:l=!0,e.next=16;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(14),p=!0,v=e.t0;case 29:e.prev=29,e.prev=30,l||null==x.return||x.return();case 32:if(e.prev=32,!p){e.next=35;break}throw v;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return w=s.find((function(e){return console.log(e.args.commitment,c),e.args.commitment===c})),y=w?w.args.leafIndex:-1,e.next=41,u.path(y);case 41:return _=e.sent,k=_.root,I=_.path_elements,E=_.path_index,e.next=47,r.isKnownRoot(k);case 47:if(e.sent){e.next=50;break}return e.abrupt("return",{type:"error",title:"Merkle Tree",message:"Merkle Tree is corrupted either invalid paths"});case 50:return e.next=52,r.isSpent(t.nullifierHash);case 52:if(!e.sent){e.next=55;break}return e.abrupt("return",{type:"error",title:"Already Spent",message:"The provided note is already spent"});case 55:if(!(y<0)){e.next=57;break}return e.abrupt("return",{type:"error",title:"Deposit Leaf",message:"The deposit is not found in the tree"});case 57:return e.abrupt("return",{path_elements:I,path_index:E,root:k});case 58:case"end":return e.stop()}}),e,null,[[14,25,29,37],[30,,32,36]])})));return function(t,n,r){return e.apply(this,arguments)}}();var z=function(){var e=m(a().mark((function e(t,n,r){var o,s,i,c,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.signer.provider.getNetwork();case 3:return o=e.sent,e.next=6,n.currentDrawId();case 6:if(s=e.sent.toNumber(),M(o.chainId)){e.next=12;break}return e.abrupt("return",{type:"error",title:"Network Errr",message:"the selected network is not supported yet try [rinkeby]"});case 12:if(parseInt(r)!=s){e.next=16;break}return e.abrupt("return",{type:"error",title:"Draw Id",message:"the draw ".concat(r," is ended please create new note for drawId ").concat(s)});case 16:return i=t.commitment,t.nullifierHash,e.next=20,n.deposit(i,{value:u.fi("0.01")});case 20:return c=e.sent,e.next=23,c.wait();case 23:return f=e.sent,e.abrupt("return",{type:"success",title:"Transaction Success",message:"https://rinkeby.etherscan.io/tx/".concat(f.transactionHash)});case 25:e.next=30;break;case 27:return e.prev=27,e.t0=e.catch(0),e.abrupt("return",{type:"error",title:"Something went wrong",message:e.t0.message});case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=m(a().mark((function e(t,n,r,o,s){var i,u,c,f,l,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(r);case 3:if(i=e.sent,u=i.deposit,c=i.drawId,console.log({deposit:u}),u){e.next=9;break}return e.abrupt("return",{type:"error",title:"Invalid Note formet",message:"note formet should be [zkpt]-[amount]-[netId]-0x[nullifier]0x[secret]"});case 9:return e.next=11,T(c,n,u,o,s,"0x99d667ff3e5891a5f40288cb94276158ae8176a0",!1);case 11:if((f=e.sent).proof){e.next=14;break}return e.abrupt("return",f);case 14:return console.log({proof:f.proof,args:f.args}),e.next=17,fetch("/api/withdraw/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proof:f.proof,args:f.args})});case 17:return l=e.sent,console.log(l),e.next=21,l.json();case 21:if(p=e.sent,console.log({txResponse:p}),!p.transactionHash){e.next=27;break}return e.abrupt("return",{type:"success",title:"Transaction Success",message:"https://rinkeby.etherscan.io/tx/".concat(p.transactionHash)});case 27:return e.abrupt("return",{type:"error",title:"Something went wrong",message:p.reason?p.reason:"Something went wrong please try again!"});case 28:e.next=34;break;case 30:return e.prev=30,e.t0=e.catch(0),console.log("error while withdrawing",{err:e.t0}),e.abrupt("return",{type:"error",title:"Something went wrong",message:e.t0.message});case 34:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),S=function(){var e=m(a().mark((function e(t,n,r,o,s){var i,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(r);case 3:if(i=e.sent.deposit){e.next=6;break}return e.abrupt("return",{type:"error",title:"Invalid Note formet",message:"note formet should be [zkpt]-[amount]-[netId]-0x[nullifier]0x[secret]"});case 6:return e.next=8,T(t,n,i,o,s,"0x99d667ff3e5891a5f40288cb94276158ae8176a0",!0);case 8:if((u=e.sent).proof){e.next=11;break}return e.abrupt("return",u);case 11:return console.log({proof:u.proof,args:u.args}),e.next=14,fetch("/api/winning/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proof:u.proof,args:u.args})});case 14:return c=e.sent,e.next=17,c.json();case 17:return e.sent,e.abrupt("return",{type:"success",title:"Transaction Success",message:"https://rinkeby.etherscan.io/tx/".concat(c.transactionHash)});case 21:return e.prev=21,e.t0=e.catch(0),console.log("error while withdrawing",{err:e.t0}),e.abrupt("return",{type:"error",title:"Something went wrong",message:e.t0.message});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),P=function(){var e=m(a().mark((function e(t,n){var r,o,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n?(r="/winning.wasm",o="/winning.zkey"):(r="/withdraw.wasm",o="/withdraw.zkey"),e.next=6,_.groth16.fullProve(t,r,o);case 6:return s=e.sent.proof,i={a:[s.pi_a[0],s.pi_a[1]],b:[[s.pi_b[0][1],s.pi_b[0][0]],[s.pi_b[1][1],s.pi_b[1][0]]],c:[s.pi_c[0],s.pi_c[1]]},e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=m(a().mark((function e(t,n,r,s,i,u,c){var f,l,p,h,d,v,x;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(r,t,i);case 2:if(!(f=e.sent).type){e.next=5;break}return e.abrupt("return",y({},f));case 5:return l=f.root,p=f.path_elements,h=f.path_index,d={root:l,nullifierHash:r.nullifierHash,recipient:s,relayer:u,fee:0,random:parseInt(n),draw:parseInt(t),blind:r.guess,secret:o.O$.from(r.secret).toBigInt(),nullifier:o.O$.from(r.nullifier).toBigInt(),pathElements:p,pathIndices:h},console.log({witness:d}),e.next=10,P(d,c);case 10:return v=e.sent,x=[d.draw,d.random,d.root,d.nullifierHash,d.recipient,d.relayer,d.fee],e.abrupt("return",{proof:v,args:x});case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o,s,i){return e.apply(this,arguments)}}(),H=function(e){return{1:"mainnet",3:"robston",4:"rinkeby",5:"goerli",137:"Polygon Mainnet",16666e5:"Mainnet Harmony",16669e5:"Devnet Harmony"}[e]},M=function(e){return{1:!1,3:!1,4:!0,5:!1,137:!1,16666e5:!1,16669e5:!1}[e]},N=function(){return"0xC8b59e543cc298dECa3965a0d6c8612951bd2F24"},B=function(){var e=m(a().mark((function e(t,n,r){var o,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:if(o=e.sent,s=o.deposit,i=o.drawId,s){e.next=7;break}return e.abrupt("return",{type:"error",title:"Invalid Note formet",message:"note formet should be [zkpt]-[amount]-[netId]-0x[nullifier]0x[secret]"});case 7:if(i===parseInt(r)){e.next=9;break}return e.abrupt("return",{type:"error",title:"Invalid Draw",message:"Your deposited note has drawId ".concat(i," and your are checking in draw ").concat(r)});case 9:if(s.guess!==parseInt(n)){e.next=13;break}return e.abrupt("return",{type:"eligibility",msg:"Hurray you have won the draw enter the withdrawal address to withdraw winning amount",status:!0,won:!0});case 13:return e.abrupt("return",{type:"eligibility",msg:"Sorry you haven't won this draw try another note or withdraw your amount",status:!0,won:!1});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),D=function(e){window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x4"}]})}},4e3:function(){},921:function(){},7790:function(){},5979:function(){},9901:function(){},7783:function(){},5229:function(){},6837:function(){},2361:function(){},5903:function(){},4616:function(){},2825:function(){},2433:function(){}}]);